<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Keystone — Advertising Production Quote</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/print.css" media="print" />
</head>
<body>

<!-- ===== SIDEBAR NAV ===== -->
<aside id="sidebar">
  <div class="sidebar-header">
    <div class="logo">Keystone</div>
    <div class="version">v4.50 R3</div>
  </div>
  <nav id="section-nav"></nav>
  <div class="sidebar-footer">
    <button class="btn-ghost" id="btn-new">+ New Quote</button>
    <button class="btn-ghost" id="btn-load">Load</button>
    <button class="btn-ghost" id="btn-export-json">Export JSON</button>
  </div>
</aside>

<!-- ===== MAIN ===== -->
<main id="main">

  <!-- TOP BAR -->
  <header id="topbar">
    <div class="topbar-left">
      <h1 id="quote-title-display">Advertising Production Quote</h1>
    </div>
    <div class="topbar-right">
      <button class="btn-secondary" id="btn-topsheet-jump">Top Sheet ↓</button>
      <button class="btn-primary" id="btn-print">Print All</button>
      <button class="btn-secondary" id="btn-save">Save</button>
    </div>
  </header>

  <!-- PROJECT INFO -->
  <section id="project-info" class="card">
    <h2 class="section-heading">Project Information</h2>
    <div class="info-grid">
      <label>Quote Title
        <input type="text" id="f-title" placeholder="e.g. TV Spot — Product Launch 2026" />
      </label>
      <label>Advertiser / Brand
        <input type="text" id="f-advertiser" placeholder="Advertiser name" />
      </label>
      <label>Agency
        <input type="text" id="f-agency" placeholder="Agency name" />
      </label>
      <label>Client
        <input type="text" id="f-client" placeholder="Client name" />
      </label>
      <label>Product
        <input type="text" id="f-product" placeholder="Product / Campaign" />
      </label>
      <label>Director
        <input type="text" id="f-director" placeholder="Director name" />
      </label>
      <label>Executive Producer
        <input type="text" id="f-ep" placeholder="EP name" />
      </label>
      <label>Production Ref.#
        <input type="text" id="f-ref" placeholder="Internal reference" />
      </label>
      <label>Currency
        <select id="f-currency">
          <option value="€">EUR (€)</option>
          <option value="$">USD ($)</option>
          <option value="£">GBP (£)</option>
          <option value="¥">JPY (¥)</option>
          <option value="₩">KRW (₩)</option>
        </select>
      </label>
      <label>Date
        <input type="date" id="f-date" />
      </label>
      <label>Validity (days)
        <input type="number" id="f-validity" value="30" min="1" />
      </label>
      <label>Project Type
        <select id="f-type">
          <option value="Film">Film / TVC</option>
          <option value="Photo">Photo</option>
          <option value="Digital">Digital</option>
          <option value="Print">Print</option>
          <option value="Event">Event</option>
        </select>
      </label>
    </div>

    <div class="margin-row">
      <label>Agency Margin %
        <input type="number" id="f-margin" value="25" min="0" max="100" step="0.1" />
      </label>
      <label>Overall Discount %
        <input type="number" id="f-discount" value="0" min="0" max="100" step="0.1" />
      </label>
      <label>Notes
        <textarea id="f-notes" rows="2" placeholder="Additional notes..."></textarea>
      </label>
    </div>
  </section>

  <!-- ===== TOP SHEET ===== -->
  <section id="top-sheet" class="card">

    <div class="ts-toolbar">
      <h2 class="section-heading" style="margin-bottom:0">Top Sheet — Consolidated Quote</h2>
      <button class="btn-primary" id="btn-print-topsheet">Print Top Sheet</button>
    </div>

    <!-- Header block -->
    <div class="ts-header">
      <div class="ts-logo-block">
        <div class="ts-company-name" id="ts-company-display">Production House</div>
        <div class="ts-doc-title">ADVERTISING PRODUCTION QUOTE</div>
      </div>
      <div class="ts-ref-block">
        <span id="ts-ref-display">—</span>
        <span id="ts-date-display">—</span>
      </div>
    </div>

    <!-- Two-column project details -->
    <div class="ts-details-grid">
      <!-- Left: Production info -->
      <div class="ts-col">
        <div class="ts-field-row"><span class="ts-label">Advertiser</span><span class="ts-val" id="ts-advertiser">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Agency</span><span class="ts-val" id="ts-agency">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Product</span><span class="ts-val" id="ts-product">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Title</span><span class="ts-val" id="ts-title">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Director</span><span class="ts-val" id="ts-director">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Music</span>
          <input class="ts-input" id="ts-music" type="text" placeholder="Music / Composer" /></div>
        <div class="ts-field-row"><span class="ts-label">Agency Producer</span>
          <input class="ts-input" id="ts-ag-producer" type="text" placeholder="Agency Producer" /></div>
        <div class="ts-field-row"><span class="ts-label">Production House</span>
          <input class="ts-input" id="ts-prod-house" type="text" placeholder="Production House" /></div>
        <div class="ts-field-row"><span class="ts-label">Executive Producer</span><span class="ts-val" id="ts-ep">—</span></div>
        <div class="ts-field-row"><span class="ts-label">Line Producer</span>
          <input class="ts-input" id="ts-line-prod" type="text" placeholder="Line Producer" /></div>
        <div class="ts-field-row"><span class="ts-label">Production Service</span>
          <input class="ts-input" id="ts-prod-service" type="text" placeholder="Production Service" /></div>
        <div class="ts-field-row"><span class="ts-label">Post-Production Mgr</span>
          <input class="ts-input" id="ts-post-mgr" type="text" placeholder="Post-Production Manager" /></div>
      </div>

      <!-- Right: Shoot details -->
      <div class="ts-col">
        <div class="ts-field-row"><span class="ts-label">Nb of Films / Versions</span>
          <input class="ts-input ts-num" id="ts-nb-films" type="text" placeholder="e.g. 1 × 30s" /></div>
        <div class="ts-field-row"><span class="ts-label">Duration</span>
          <input class="ts-input ts-num" id="ts-duration" type="text" placeholder='e.g. 30"' /></div>
        <div class="ts-field-row"><span class="ts-label">Shooting Format</span>
          <input class="ts-input" id="ts-shoot-format" type="text" placeholder="e.g. Alexa 4K" /></div>
        <div class="ts-field-row"><span class="ts-label">Delivery Format</span>
          <input class="ts-input" id="ts-del-format" type="text" placeholder="e.g. HD 1920×1080" /></div>
        <div class="ts-field-row"><span class="ts-label">Medias</span>
          <input class="ts-input" id="ts-medias" type="text" placeholder="TV, Web, Cinema…" /></div>
        <div class="ts-field-row"><span class="ts-label">Studio / Locations</span>
          <input class="ts-input" id="ts-studio-loc" type="text" placeholder="Studio / Natural" /></div>
        <div class="ts-field-row"><span class="ts-label">Shooting Locations</span>
          <input class="ts-input" id="ts-shoot-loc" type="text" placeholder="City, Country" /></div>
        <div class="ts-field-row"><span class="ts-label">Prep Days</span>
          <input class="ts-input ts-num" id="ts-prep-days" type="number" min="0" placeholder="0" /></div>
        <div class="ts-field-row"><span class="ts-label">Travel Days</span>
          <input class="ts-input ts-num" id="ts-travel-days" type="number" min="0" placeholder="0" /></div>
        <div class="ts-field-row"><span class="ts-label">Shooting Days</span>
          <input class="ts-input ts-num" id="ts-shoot-days" type="number" min="0" placeholder="0" /></div>
        <div class="ts-field-row"><span class="ts-label">Date Pre-Production</span>
          <input class="ts-input" id="ts-date-preprod" type="date" /></div>
        <div class="ts-field-row"><span class="ts-label">Date Shooting (1st day)</span>
          <input class="ts-input" id="ts-date-shoot" type="date" /></div>
        <div class="ts-field-row"><span class="ts-label">Date Post-Production</span>
          <input class="ts-input" id="ts-date-postprod" type="date" /></div>
        <div class="ts-field-row"><span class="ts-label">Date Delivery</span>
          <input class="ts-input" id="ts-date-delivery" type="date" /></div>
      </div>
    </div>

    <!-- Budget Table -->
    <div class="ts-budget-title">MERGED SUMMARY</div>
    <table class="ts-table">
      <thead>
        <tr>
          <th class="ts-th-id">Ref</th>
          <th class="ts-th-name">Description</th>
          <th class="ts-th-amt">Cost (<span class="ts-cur">€</span>)</th>
          <th class="ts-th-amt">Margin (<span class="ts-cur">€</span>)</th>
          <th class="ts-th-amt">Total (<span class="ts-cur">€</span>)</th>
        </tr>
      </thead>
      <tbody id="ts-budget-body">
        <!-- Populated by JS -->
      </tbody>
    </table>

    <!-- VAT & Total -->
    <div class="ts-totals-block">
      <div class="ts-total-row">
        <span>L — Subtotal (excl. VAT)</span>
        <span id="ts-L">—</span>
      </div>
      <div class="ts-total-row ts-markup-row">
        <span>Markup / Discount</span>
        <input class="ts-input ts-num" id="ts-cutdown" type="number" step="any" placeholder="0"
               title="Enter a cut-down amount (negative to reduce)" />
      </div>
      <div class="ts-total-row ts-highlight">
        <span>M — TOTAL W/O VAT</span>
        <span id="ts-M">—</span>
      </div>
      <div class="ts-total-row ts-vat-row">
        <span>Q — VAT
          <input class="ts-input ts-num ts-vat-pct" id="ts-vat-pct" type="number"
                 min="0" max="100" step="0.1" value="20" />%
        </span>
        <span id="ts-Q">—</span>
      </div>
      <div class="ts-total-row ts-grand">
        <span>R — TOTAL WITH VAT</span>
        <span id="ts-R">—</span>
      </div>
    </div>

    <!-- Validity -->
    <div class="ts-validity-row">
      Quote validity: <strong id="ts-validity-display">30 days</strong>
      &nbsp;·&nbsp; Valid until: <strong id="ts-valid-until">—</strong>
      &nbsp;·&nbsp; Production Ref#: <strong id="ts-ref-display2">—</strong>
    </div>

    <!-- Signature block -->
    <div class="ts-signatures">
      <div class="ts-sig-col">
        <div class="ts-sig-label">Date</div>
        <div class="ts-sig-line" id="ts-sig-date">—</div>
        <div class="ts-sig-label" style="margin-top:8px">Validity (days)</div>
        <div class="ts-sig-line" id="ts-sig-validity">—</div>
        <div class="ts-sig-label" style="margin-top:8px">End of Validity</div>
        <div class="ts-sig-line" id="ts-sig-end">—</div>
      </div>
      <div class="ts-sig-col">
        <div class="ts-sig-label">Client</div>
        <div class="ts-sig-box"></div>
        <div class="ts-sig-label">Signature</div>
      </div>
      <div class="ts-sig-col">
        <div class="ts-sig-label">Production House / Agency</div>
        <div class="ts-sig-box"></div>
        <div class="ts-sig-label">Signature</div>
      </div>
    </div>

  </section>

  <!-- QUOTE SECTIONS (dynamically generated) -->
  <div id="quote-sections"></div>

</main>

<!-- ===== LOAD MODAL ===== -->
<div id="modal-load" class="modal hidden">
  <div class="modal-box">
    <h3>Load Quote</h3>
    <div id="saved-quotes-list"></div>
    <div class="modal-actions">
      <button class="btn-ghost" id="btn-modal-close">Cancel</button>
      <label class="btn-secondary" style="cursor:pointer">
        Import JSON <input type="file" id="import-file" accept=".json" style="display:none" />
      </label>
    </div>
  </div>
</div>

<script src="js/data.js"></script>
<script src="js/app.js"></script>
</body>
</html>
